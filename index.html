<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT Set 16 - Comp Navigator Pro</title>
    <style>
        /* ============================================
           GLOBAL STYLES & RESET
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           CONTAINER - RESPONSIVE LAYOUT
           ============================================ */
        .container {
            display: flex;
            min-height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        /* Desktop: Sol sohbet, saƒü kontroller */
        @media (max-width: 968px) {
            .container {
                flex-direction: column;
                padding: 10px;
                gap: 15px;
            }
        }

        /* ============================================
           CHAT PANEL - SOL TARAF
           ============================================ */
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(30, 30, 46, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        @media (max-width: 968px) {
            .chat-panel {
                order: 2;
                max-height: 500px;
                padding: 15px;
            }
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .chat-header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .chat-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        @media (max-width: 968px) {
            .chat-header h1 {
                font-size: 22px;
            }
            .chat-header p {
                font-size: 12px;
            }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(20, 20, 30, 0.6);
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 20px;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .bot-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            line-height: 1.8;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .user-message {
            background: rgba(100, 100, 120, 0.4);
            padding: 15px;
            border-radius: 12px;
            border-left: 5px solid #667eea;
        }

        .comp-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #ffd700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .comp-section {
            margin: 12px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .comp-section strong {
            color: #ffd700;
            font-size: 16px;
        }

        .warning-box {
            background: rgba(255, 100, 100, 0.2);
            border-left: 4px solid #ff6b6b;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        /* ============================================
           CONTROL PANEL - SAƒû TARAF
           ============================================ */
        .control-panel {
            width: 450px;
            background: rgba(30, 30, 46, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            max-height: calc(100vh - 40px);
            backdrop-filter: blur(10px);
        }

        @media (max-width: 968px) {
            .control-panel {
                order: 1;
                width: 100%;
                max-height: none;
                padding: 15px;
            }
        }

        .control-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(102, 126, 234, 0.3);
        }

        .control-section:last-of-type {
            border-bottom: none;
        }

        .control-section h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 18px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ============================================
           INFO BOX
           ============================================ */
        .info-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 13px;
            border-left: 5px solid #667eea;
            line-height: 1.6;
        }

        /* ============================================
           STAGE SELECTION
           ============================================ */
        .stage-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        @media (max-width: 968px) {
            .stage-buttons {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
        }

        .stage-btn {
            padding: 12px;
            background: rgba(100, 100, 120, 0.3);
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
            font-weight: 600;
            color: #e0e0e0;
            text-align: center;
        }

        .stage-btn:hover {
            background: rgba(100, 100, 120, 0.5);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .stage-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #ffd700;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.5);
        }

        /* ============================================
           CHAMPION GRID
           ============================================ */
        .champion-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-height: 450px;
            overflow-y: auto;
            padding-right: 5px;
        }

        @media (max-width: 968px) {
            .champion-grid {
                grid-template-columns: repeat(2, 1fr);
                max-height: 350px;
            }
        }

        .champion-card {
            background: rgba(50, 50, 70, 0.6);
            border-radius: 12px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .champion-card:hover {
            background: rgba(70, 70, 90, 0.7);
            transform: scale(1.05);
        }

        .champion-card.selected {
            border-color: #ffd700;
            background: rgba(102, 126, 234, 0.4);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .champion-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            text-align: center;
            padding: 5px;
        }

        .champion-name {
            font-weight: 700;
            margin-bottom: 8px;
            text-align: center;
            font-size: 14px;
        }

        .star-selector {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .star-btn {
            flex: 1;
            padding: 6px;
            background: rgba(80, 80, 100, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
            text-align: center;
            font-weight: 600;
        }

        .star-btn:hover {
            background: rgba(100, 100, 120, 0.7);
            transform: scale(1.1);
        }

        .star-btn.active {
            background: #ffd700;
            color: #1a1a2e;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* ============================================
           ITEM GRID
           ============================================ */
        .item-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        @media (max-width: 968px) {
            .item-grid {
                grid-template-columns: repeat(3, 1fr);
                max-height: 300px;
            }
        }

        .item-card {
            background: rgba(50, 50, 70, 0.6);
            border-radius: 10px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
        }

        .item-card:hover {
            background: rgba(70, 70, 90, 0.7);
            transform: scale(1.08);
        }

        .item-card.selected {
            border-color: #ffd700;
            background: rgba(102, 126, 234, 0.4);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        .item-image {
            width: 100%;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 6px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            padding: 3px;
        }

        .item-name {
            font-size: 11px;
            font-weight: 600;
        }

        /* ============================================
           AUGMENT SELECTION
           ============================================ */
        .augment-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        @media (max-width: 968px) {
            .augment-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .augment-btn {
            padding: 15px;
            background: rgba(100, 100, 120, 0.3);
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .augment-btn:hover {
            background: rgba(100, 100, 120, 0.5);
            transform: translateY(-2px);
        }

        .augment-btn.selected {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-color: #ffd700;
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.4);
        }

        /* ============================================
           SUBMIT BUTTON
           ============================================ */
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.6);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        /* ============================================
           SCROLLBAR STYLING
           ============================================ */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 30, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ============================================
             CHAT PANEL - SOL TARAF
             ============================================ -->
        <div class="chat-panel">
            <div class="chat-header">
                <h1>üéÆ TFT Set 16 - Comp Navigator Pro</h1>
                <p>Erken oyun durumunuza g√∂re akƒ±llƒ± kompozisyon √∂nerisi</p>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <div class="bot-message">
                        <div class="comp-name">üìã Sistem Nasƒ±l √áalƒ±≈üƒ±r?</div>
                        <div class="comp-section">
                            <strong>üéØ Adƒ±m Adƒ±m Kullanƒ±m:</strong><br><br>
                            <strong>1.</strong> Oyun a≈üamanƒ±zƒ± se√ßin (2-1, 2-5, 3-2 vb.)<br>
                            <strong>2.</strong> Elinizde bulunan karakterlere tƒ±klayƒ±n ve yƒ±ldƒ±z seviyesini belirtin<br>
                            <strong>3.</strong> Sahip olduƒüunuz e≈üyalarƒ± i≈üaretleyin<br>
                            <strong>4.</strong> Augment tercihinizi se√ßin (Ekonomi, Combat, Trait)<br>
                            <strong>5.</strong> "üîç Kompozisyon Ara" butonuna basƒ±n<br><br>
                            
                            <strong>üß† Akƒ±llƒ± Analiz:</strong><br>
                            Sistem, se√ßtiƒüiniz t√ºm bilgileri Set 16 meta kompozisyonlarƒ±yla kar≈üƒ±la≈ütƒ±rƒ±r ve size en uygun 1-3 kompozisyonu √∂nerir. Augment baƒüƒ±mlƒ± kompozisyonlar i√ßin √∂zel uyarƒ±lar verilir!<br><br>
                            
                            <strong>‚ö†Ô∏è √ñnemli:</strong> Bazƒ± kompozisyonlar belirli augment'ler olmadan oynanamaz. Sistem bunu otomatik tespit eder ve size bildirir. üöÄ
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             CONTROL PANEL - SAƒû TARAF
             ============================================ -->
        <div class="control-panel">
            <div class="info-box">
                üí° <strong>Hƒ±zlƒ± ƒ∞pucu:</strong> Karakterlere tƒ±klayarak se√ßin, ardƒ±ndan yƒ±ldƒ±z seviyesini belirtin. Birden fazla karakter ve e≈üya se√ßebilirsiniz. Mobil kullanƒ±yorsanƒ±z kaydƒ±rarak t√ºm se√ßeneklere eri≈üebilirsiniz.
            </div>

            <!-- A≈ûAMA SE√áƒ∞Mƒ∞ -->
            <div class="control-section">
                <h3>üéØ Oyun A≈üamasƒ±</h3>
                <div class="stage-buttons" id="stageButtons"></div>
            </div>

            <!-- KARAKTER SE√áƒ∞Mƒ∞ -->
            <div class="control-section">
                <h3>üë• Karakterleriniz</h3>
                <div class="champion-grid" id="championGrid"></div>
            </div>

            <!-- E≈ûYA SE√áƒ∞Mƒ∞ -->
            <div class="control-section">
                <h3>‚öîÔ∏è E≈üyalarƒ±nƒ±z</h3>
                <div class="item-grid" id="itemGrid"></div>
            </div>

            <!-- AUGMENT TERCƒ∞Hƒ∞ -->
            <div class="control-section">
                <h3>‚ú® Augment Tercihiniz</h3>
                <div class="augment-buttons" id="augmentButtons"></div>
            </div>

            <button class="submit-btn" onclick="analyzeAndSuggest()">
                üîç Kompozisyon Ara
            </button>
        </div>
    </div>

    <script>
        // ============================================
        // TFT SET 16 META KOMPOZƒ∞SYONLARI
        // ============================================
        const META_COMPS = [
            {
                name: "üî• Blaster Enforcer (Caitlyn Carry)",
                coreUnits: ["Caitlyn", "Vi", "Warwick", "Maddie", "Zeri"],
                carries: ["Caitlyn", "Zeri"],
                recommendedItems: ["Guinsoo's Rageblade", "Giant Slayer", "Runaan's Hurricane", "Last Whisper"],
                playableStages: ["2-1", "2-5", "3-2", "3-5", "4-1"],
                preferredAugments: ["combat", "trait"],
                requiredAugment: null,
                gameplan: "Early: Enforcer + Blaster base kurun. Mid: Caitlyn'i 2‚≠ê yapƒ±n ve e≈üya verin. Late: Zeri ile high damage output saƒülayƒ±n.",
                reasons: ["Caitlyn erken oyun carry'si", "Enforcer tanklƒ±k verir", "E≈üya baƒüƒ±mlƒ±lƒ±ƒüƒ± d√º≈ü√ºk"],
                augmentAdvice: "Combat augmentleri (Attack Speed, AD) tercih edin. Blaster veya Enforcer trait augmentleri m√ºkemmel."
            },
            {
                name: "‚ö° Rebel Ekko Hyperroll",
                coreUnits: ["Ekko", "Powder", "Scar", "Smeech", "Darius"],
                carries: ["Ekko", "Powder"],
                recommendedItems: ["Infinity Edge", "Last Whisper", "Bloodthirster", "Hand of Justice"],
                playableStages: ["2-1", "2-5", "3-2"],
                preferredAugments: ["economy", "trait"],
                requiredAugment: null,
                gameplan: "Early: 3 Rebel aktif edin. Mid: Ekko 3‚≠ê i√ßin agresif reroll. Late: Ekko ile tek ba≈üƒ±na ma√ßƒ± kazanƒ±n.",
                reasons: ["Ekko 3‚≠ê ultra g√º√ßl√º", "Hyperroll stili", "Ekonomi augment ile √ºst√ºn"],
                augmentAdvice: "Ekonomi augmentleri (Rich Get Richer, Money Heist) ideal. Rebel trait augment'i S tier."
            },
            {
                name: "üõ°Ô∏è Form Swapper Jayce Carry",
                coreUnits: ["Jayce", "Rell", "Elise", "Steb", "Loris"],
                carries: ["Jayce", "Rell"],
                recommendedItems: ["Titan's Resolve", "Warmog's Armor", "Gargoyle Stoneplate", "Sunfire Cape"],
                playableStages: ["3-2", "3-5", "4-1", "4-5"],
                preferredAugments: ["combat", "trait"],
                requiredAugment: null,
                gameplan: "Early: Sentinel tanklarƒ±nƒ± stack'leyin. Mid: Jayce 2‚≠ê edin. Late: Form swap combo'larƒ± ile rakip teamfight'ƒ±nƒ± par√ßalayƒ±n.",
                reasons: ["Tank meta'da dominant", "Jayce versatile", "Mid-late spike"],
                augmentAdvice: "Form Swapper trait augment + Combat augmentleri (Armor/MR) √ßok g√º√ßl√º."
            },
            {
                name: "üé≠ Emissary Academy (Lux 3‚≠ê)",
                coreUnits: ["Lux", "Leona", "Zyra", "Nami", "Tristana"],
                carries: ["Lux", "Leona"],
                recommendedItems: ["Jeweled Gauntlet", "Archangel's Staff", "Blue Buff", "Morellonomicon"],
                playableStages: ["2-5", "3-2", "3-5"],
                preferredAugments: ["economy", "trait"],
                requiredAugment: null,
                gameplan: "Early: Academy synergy kurun (ekonomi). Mid: Lux 3‚≠ê i√ßin reroll. Late: Emissary buff'larƒ±yla AoE massacre yapƒ±n.",
                reasons: ["Lux 3‚≠ê one-shot potential", "Academy econ trait", "Magic damage threat"],
                augmentAdvice: "Academy augment ZORUNLU. Ekonomi augmentleri ile reroll hƒ±zlandƒ±rƒ±n."
            },
            {
                name: "üåü Zaun Augment - Chem-Baron Flex",
                coreUnits: ["Renata", "Smeech", "Silco", "Scar", "Urgot"],
                carries: ["Renata", "Silco", "Urgot"],
                recommendedItems: ["Archangel's Staff", "Morellonomicon", "Guardbreaker", "Ionic Spark"],
                playableStages: ["2-5", "3-2", "3-5", "4-1", "4-5"],
                preferredAugments: ["trait"],
                requiredAugment: "Zaun Heart/Emblem/Crest",
                gameplan: "Early: Chem-Baron 3 edin (econ). Mid: Zaun augment alƒ±n (ZORUNLU). Late: 6-7 Chem-Baron ile ultra g√º√ßl√º zombie army.",
                reasons: ["Zaun augment ile +2-3 Chem-Baron", "Silco resurrection broken", "Late game hyper scale"],
                augmentAdvice: "‚ö†Ô∏è ZAUN AUGMENT ZORUNLU! Bu augment olmadan bu komp oynanamaz. ƒ∞lk augment stage'inde Zaun Heart/Emblem/Crest se√ßin."
            },
            {
                name: "üéØ Sniper Conqueror (Ambessa + Caitlyn)",
                coreUnits: ["Ambessa", "Caitlyn", "Tristana", "Renata", "Elise"],
                carries: ["Caitlyn", "Ambessa", "Tristana"],
                recommendedItems: ["Giant Slayer", "Last Whisper", "Runaan's Hurricane", "Bloodthirster"],
                playableStages: ["3-5", "4-1", "4-5", "5-1"],
                preferredAugments: ["combat", "trait"],
                requiredAugment: null,
                gameplan: "Early: Blaster base. Mid: Caitlyn + Tristana 2‚≠ê. Late: Ambessa frontline + sniperlar backline eri≈üimi.",
                reasons: ["√áift carry sistemi", "Backline access m√ºkemmel", "Late game power"],
                augmentAdvice: "Combat augmentleri (AD, Attack Speed) + Sniper/Conqueror trait augmentleri ideal."
            },
            {
                name: "üîÆ High Arcana (Special Transform Augment)",
                coreUnits: ["Twisted Fate", "Ekko", "Zoe", "Heimerdinger", "Nami"],
                carries: ["Twisted Fate", "Heimerdinger"],
                recommendedItems: ["Jeweled Gauntlet", "Archangel's Staff", "Blue Buff", "Hand of Justice"],
                playableStages: ["3-2", "3-5", "4-1", "4-5", "5-1"],
                preferredAugments: ["trait"],
                requiredAugment: "High Arcana (TF Transform)",
                gameplan: "Early: Mage √ºnitelerini toplayƒ±n. Mid: HIGH ARCANA augment'i alƒ±n (Twisted Fate'i transform eder). Late: TF ile oyunu domine edin.",
                reasons: ["TF transform ultra g√º√ßl√º", "Trait augment baƒüƒ±mlƒ±", "Unique playstyle"],
                augmentAdvice: "‚ö†Ô∏è HIGH ARCANA AUGMENT ZORUNLU! Bu augment Twisted Fate'i √∂zel forma d√∂n√º≈üt√ºr√ºr. ƒ∞lk veya ikinci augment stage'inde mutlaka se√ßin, yoksa bu komp oynanamaz."
            }
        ];

        // Set 16 Karakterler (Cost order)
        const CHAMPIONS = [
            // 1 Cost
            { name: "Powder", cost: 1 },
            { name: "Vander", cost: 1 },
            { name: "Zyra", cost: 1 },
            { name: "Trundle", cost: 1 },
            { name: "Maddie", cost: 1 },
            { name: "Darius", cost: 1 },
            { name: "Scar", cost: 1 },
            { name: "Steb", cost: 1 },
            // 2 Cost
            { name: "Vi", cost: 2 },
            { name: "Rell", cost: 2 },
            { name: "Leona", cost: 2 },
            { name: "Nami", cost: 2 },
            { name: "Zeri", cost: 2 },
            { name: "Smeech", cost: 2 },
            { name: "Tristana", cost: 2 },
            { name: "Draven", cost: 2 },
            // 3 Cost
            { name: "Ekko", cost: 3 },
            { name: "Renata", cost: 3 },
            { name: "Loris", cost: 3 },
            { name: "Elise", cost: 3 },
            { name: "Akali", cost: 3 },
            { name: "Nocturne", cost: 3 },
            { name: "Twisted Fate", cost: 3 },
            // 4 Cost
            { name: "Caitlyn", cost: 4 },
            { name: "Silco", cost: 4 },
            { name: "Zoe", cost: 4 },
            { name: "Garen", cost: 4 },
            { name: "Urgot", cost: 4 },
            { name: "Warwick", cost: 4 },
            // 5 Cost
            { name: "Jayce", cost: 5 },
            { name: "Ambessa", cost: 5 },
            { name: "Heimerdinger", cost: 5 },
            { name: "Mordekaiser", cost: 5 },
            { name: "Lux", cost: 5 }
        ];

        // Set 16 E≈üyalar
        const ITEMS = [
            "Infinity Edge", "Last Whisper", "Giant Slayer", "Bloodthirster",
            "Runaan's Hurricane", "Guinsoo's Rageblade", "Statikk Shiv",
            "Archangel's Staff", "Blue Buff", "Jeweled Gauntlet", "Morellonomicon",
            "Sunfire Cape", "Warmog's Armor", "Titan's Resolve", "Gargoyle Stoneplate",
            "Ionic Spark", "Guardbreaker", "Redemption", "Hand of Justice"
        ];

        const STAGES = ["2-1", "2-5", "3-2", "3-5", "4-1", "4-5", "5-1", "5-5"];

        const AUGMENT_TYPES = ["economy", "combat", "trait"];

        // State Management
        let selectedStage = null;
        let selectedChampions = {}; // {championName: starLevel}
        let selectedItems = [];
        let selectedAugmentType = null;

        // ============================================
        // UI BA≈ûLATMA
        // ============================================
        function initializeUI() {
            // A≈üama butonlarƒ±
            const stageContainer = document.getElementById('stageButtons');
            STAGES.forEach(stage => {
                const btn = document.createElement('div');
                btn.className = 'stage-btn';
                btn.textContent = stage;
                btn.onclick = () => selectStage(stage, btn);
                stageContainer.appendChild(btn);
            });

            // Karakter kartlarƒ±
            const championContainer = document.getElementById('championGrid');
            CHAMPIONS.forEach(champ => {
                const card = document.createElement('div');
                card.className = 'champion-card';
                card.innerHTML = `
                    <div class="champion-image">
                        ${champ.name}<br><span style="font-size:10px;">(${champ.cost}üí∞)</span>
                    </div>
                    <div class="champion-name">${champ.name}</div>
                    <div class="star-selector">
                        <div class="star-btn" data-champ="${champ.name}" data-star="1">1‚≠ê</div>
                        <div class="star-btn" data-champ="${champ.name}" data-star="2">2‚≠ê</div>
                        <div class="star-btn" data-champ="${champ.name}" data-star="3">3‚≠ê</div>
                    </div>
                `;
                card.onclick = (e) => {
                    if (e.target.classList.contains('star-btn')) {
                        toggleChampion(e.target.dataset.champ, parseInt(e.target.dataset.star), card, e.target);
                    }
                };
                championContainer.appendChild(card);
            });

            // E≈üya kartlarƒ±
            const itemContainer = document.getElementById('itemGrid');
            ITEMS.forEach(item => {
                const card = document.createElement('div');
                card.className = 'item-card';
                card.innerHTML = `
                    <div class="item-image">${item}</div>
                    <div class="item-name">${item}</div>
                `;
                card.onclick = () => toggleItem(item, card);
                itemContainer.appendChild(card);
            });

            // Augment butonlarƒ±
            const augmentContainer = document.getElementById('augmentButtons');
            const augmentLabels = {
                'economy': 'üí∞ Ekonomi',
                'combat': '‚öîÔ∏è Combat',
                'trait': '‚ú® Trait'
            };
            AUGMENT_TYPES.forEach(type => {
                const btn = document.createElement('div');
                btn.className = 'augment-btn';
                btn.textContent = augmentLabels[type];
                btn.onclick = () => selectAugmentType(type, btn);
                augmentContainer.appendChild(btn);
            });
        }

        // ============================================
        // SE√áƒ∞M FONKSƒ∞YONLARI
        // ============================================
        function selectStage(stage, btn) {
            document.querySelectorAll('.stage-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            selectedStage = stage;
        }

        function toggleChampion(champion, starLevel, card, starBtn) {
            if (selectedChampions[champion] === starLevel) {
                delete selectedChampions[champion];
                card.classList.remove('selected');
                card.querySelectorAll('.star-btn').forEach(b => b.classList.remove('active'));
            } else {
                selectedChampions[champion] = starLevel;
                card.classList.add('selected');
                card.querySelectorAll('.star-btn').forEach(b => b.classList.remove('active'));
                starBtn.classList.add('active');
            }
        }

        function toggleItem(item, card) {
            const index = selectedItems.indexOf(item);
            if (index > -1) {
                selectedItems.splice(index, 1);
                card.classList.remove('selected');
            } else {
                selectedItems.push(item);
                card.classList.add('selected');
            }
        }

        function selectAugmentType(type, btn) {
            if (selectedAugmentType === type) {
                selectedAugmentType = null;
                btn.classList.remove('selected');
            } else {
                document.querySelectorAll('.augment-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedAugmentType = type;
            }
        }

        // ============================================
        // ANA ANALƒ∞Z FONKSƒ∞YONU
        // ============================================
        function analyzeAndSuggest() {
            // Validasyon
            if (!selectedStage) {
                addBotMessage("‚ö†Ô∏è L√ºtfen √∂nce bir oyun a≈üamasƒ± se√ßin!");
                return;
            }

            if (Object.keys(selectedChampions).length === 0) {
                addBotMessage("‚ö†Ô∏è L√ºtfen en az bir karakter se√ßin!");
                return;
            }

            // √ñNEMLƒ∞: ESKƒ∞ SONU√áLARI TEMƒ∞ZLE
            clearPreviousResults();

            // Kullanƒ±cƒ± mesajƒ±nƒ± g√∂ster
            const champText = Object.entries(selectedChampions)
                .map(([champ, stars]) => `${champ} (${stars}‚≠ê)`)
                .join(', ');
            const itemText = selectedItems.length > 0 ? selectedItems.join(', ') : 'Yok';
            const augmentText = selectedAugmentType ? selectedAugmentType : 'Se√ßilmedi';
            
            addUserMessage(`
                <strong>üéØ A≈üama:</strong> ${selectedStage}<br>
                <strong>üë• Karakterler:</strong> ${champText}<br>
                <strong>‚öîÔ∏è E≈üyalar:</strong> ${itemText}<br>
                <strong>‚ú® Augment Tercihi:</strong> ${augmentText}
            `);

            // Kompozisyonlarƒ± puanla
            const scoredComps = META_COMPS.map(comp => ({
                comp,
                score: calculateCompScore(comp)
            }));

            // En y√ºksek puanlƒ± 3 kompozisyonu al
            const topComps = scoredComps
                .sort((a, b) => b.score - a.score)
                .slice(0, 3)
                .filter(item => item.score > 0);

            if (topComps.length === 0) {
                addBotMessage("‚ùå ≈ûu anki durumunuza uygun g√º√ßl√º bir kompozisyon bulunamadƒ±. Farklƒ± karakterler veya augment tercihi deneyin!");
                return;
            }

            // √ñnerileri sƒ±rayla g√∂ster
            topComps.forEach((item, index) => {
                setTimeout(() => {
                    displayCompSuggestion(item.comp, item.score, index + 1);
                }, index * 400);
            });
        }

        // ============================================
        // ESKƒ∞ SONU√áLARI TEMƒ∞ZLE (√áOK √ñNEMLƒ∞!)
        // ============================================
        function clearPreviousResults() {
            const chatMessages = document.getElementById('chatMessages');
            // ƒ∞lk mesaj (a√ßƒ±klama) hari√ß t√ºm mesajlarƒ± sil
            while (chatMessages.children.length > 1) {
                chatMessages.removeChild(chatMessages.lastChild);
            }
        }

        // ============================================
        // PUANLAMA Sƒ∞STEMƒ∞
        // ============================================
        function calculateCompScore(comp) {
            let score = 0;

            // 1. A≈üama uygunluƒüu (+25 puan)
            if (comp.playableStages.includes(selectedStage)) {
                score += 25;
            }

            // 2. Karakter e≈üle≈ümesi
            const myChamps = Object.keys(selectedChampions);
            comp.coreUnits.forEach(requiredChamp => {
                if (myChamps.includes(requiredChamp)) {
                    score += 18; // Her e≈üle≈üen core unit +18
                    
                    // Carry karakterse ekstra puan
                    if (comp.carries.includes(requiredChamp)) {
                        score += 15; // Carry varsa +15 ekstra
                        
                        // Yƒ±ldƒ±z seviyesi bonusu
                        const stars = selectedChampions[requiredChamp];
                        if (stars === 2) score += 10;
                        if (stars === 3) score += 25; // 3‚≠ê ultra deƒüerli
                    }
                }
            });

            // 3. E≈üya uygunluƒüu
            const matchingItems = selectedItems.filter(item => 
                comp.recommendedItems.includes(item)
            );
            score += matchingItems.length * 8; // Her uygun e≈üya +8

            // 4. E≈üya sayƒ±sƒ± bonusu
            if (selectedItems.length >= 3) score += 12;

            // 5. Carry varlƒ±ƒüƒ± kritik
            const hasCarry = comp.carries.some(carry => myChamps.includes(carry));
            if (hasCarry) {
                score += 30; // Carry varsa b√ºy√ºk bonus
            }

            // 6. Augment uygunluƒüu
            if (selectedAugmentType) {
                if (comp.preferredAugments.includes(selectedAugmentType)) {
                    score += 20; // Augment uyumluysa +20
                }
            }

            // 7. ZORUNLU AUGMENT KONTROL√ú (Kritik!)
            if (comp.requiredAugment !== null && selectedAugmentType !== 'trait') {
                // Eƒüer komp zorunlu augment gerektiriyorsa ve trait se√ßilmediyse ceza
                score -= 40; // B√ºy√ºk puan kaybƒ±
            }

            return Math.max(0, score); // Negatif olmayacak
        }

        // ============================================
        // MESAJ G√ñR√úNT√úLEME
        // ============================================
        function addUserMessage(content) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = `<div class="user-message">${content}</div>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addBotMessage(content) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = `<div class="bot-message">${content}</div>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function displayCompSuggestion(comp, score, rank) {
            const myChamps = Object.keys(selectedChampions);
            const matchingChamps = comp.coreUnits.filter(c => myChamps.includes(c));
            const matchingItems = selectedItems.filter(item => comp.recommendedItems.includes(item));

            // Zorunlu augment uyarƒ±sƒ± kontrol√º
            let requiredAugmentWarning = '';
            if (comp.requiredAugment !== null) {
                requiredAugmentWarning = `
                    <div class="warning-box">
                        <strong>‚ö†Ô∏è ZORUNLU AUGMENT UYARISI:</strong><br>
                        Bu kompozisyon <strong>"${comp.requiredAugment}"</strong> augment'i olmadan oynanamaz!<br>
                        ${comp.augmentAdvice}
                    </div>
                `;
            }

            const content = `
                <div class="comp-name">#${rank} ${comp.name}</div>
                
                ${requiredAugmentWarning}
                
                <div class="comp-section">
                    <strong>üíØ Uygunluk Puanƒ±:</strong> ${score}/100
                </div>

                <div class="comp-section">
                    <strong>‚ú® Neden Bu Komp?</strong><br>
                    ${comp.reasons.map(r => `‚Ä¢ ${r}`).join('<br>')}
                </div>

                <div class="comp-section">
                    <strong>üéØ Ana Ta≈üƒ±yƒ±cƒ±lar:</strong> ${comp.carries.join(', ')}
                </div>

                <div class="comp-section">
                    <strong>‚úÖ Sahip Olduƒüunuz Core √úniteler:</strong><br>
                    ${matchingChamps.length > 0 ? matchingChamps.map(c => `${c} (${selectedChampions[c]}‚≠ê)`).join(', ') : 'Hen√ºz yok - Toplayƒ±n!'}
                </div>

                <div class="comp-section">
                    <strong>üìã T√ºm Core Karakterler:</strong><br>
                    ${comp.coreUnits.join(', ')}
                </div>

                <div class="comp-section">
                    <strong>‚öîÔ∏è √ñncelikli E≈üyalar:</strong><br>
                    ${comp.recommendedItems.join(', ')}
                </div>

                ${matchingItems.length > 0 ? `
                <div class="comp-section">
                    <strong>üéÅ Uygun E≈üyalarƒ±nƒ±z:</strong> ${matchingItems.join(', ')}
                </div>
                ` : ''}

                <div class="comp-section">
                    <strong>‚ú® Augment √ñnerisi:</strong><br>
                    ${comp.augmentAdvice}
                </div>

                <div class="comp-section">
                    <strong>üìà Oyun Planƒ±:</strong><br>
                    ${comp.gameplan}
                </div>
            `;

            addBotMessage(content);
        }

        // Sayfa y√ºklendiƒüinde ba≈ülat
        initializeUI();
    </script>
</body>
</html>